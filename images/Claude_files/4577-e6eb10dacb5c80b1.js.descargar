"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4577],{96755:function(e,t,n){n.d(t,{Ck:function(){return m},IR:function(){return f},Pd:function(){return h},WQ:function(){return d},_y:function(){return p},aj:function(){return a},gq:function(){return C},uV:function(){return u},xo:function(){return l},yq:function(){return g}});var r,a,i=n(83041),s=n(11492),o=n(35146),c=n(84983);let u=()=>(0,i.WE)("/api/legal",{staleTime:1/0,meta:{noToast:!0}}),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.useIsClaudeDot)();return(0,i.uC)("/api/auth/send_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.useIsClaudeDot)();return(0,i.uC)("/api/auth/verify_code","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.useIsClaudeDot)();return(0,i.uC)("/api/auth/verify_google","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.useIsClaudeDot)();return(0,i.uC)("/api/auth/accept_invite","POST",{...e,transformVariables:e=>({...e,source:t?"claude":"console"})})},p=()=>(0,i.uC)("/api/auth/logout","POST"),g=()=>{let e=(0,c.useQueryClient)();return(0,i.uC)("/api/account","PUT",{async onSuccess(){await e.invalidateQueries([o.aY])}})},m=()=>(0,i.Ne)("/api/account","PUT",(e,t)=>(null==t?void 0:t.account)?{...t,account:{...t.account,settings:e}}:t,{queryKey:[o.aY],transformVariables:e=>({settings:e})});function C(e){return(0,i.WE)("/api/signups/".concat(e),{enabled:!!e})}(r=a||(a={})).Accepted="accepted",r.Expired="expired",r.Deleted="deleted",r.Pending="pending"},31257:function(e,t,n){n.d(t,{A6:function(){return b},AO:function(){return E},C2:function(){return x},Io:function(){return P},M:function(){return f},Z1:function(){return F},_A:function(){return w},ao:function(){return A},c6:function(){return p},cG:function(){return C},dF:function(){return _},nJ:function(){return S},wJ:function(){return h},wy:function(){return T},z6:function(){return v},zW:function(){return R}});var r=n(11492),a=n(23532),i=n(90974),s=n(16096),o=n(59374);n(88337);var c=n(54603),u=n(7653),l=n(80248),d=n(96755);function f(e,t){for(let n of e.invites)if(n.organization.capabilities&&n.organization.capabilities.includes(t))return n}let h=(e,t)=>{let n=!1===e.settings.has_finished_claudeai_onboarding;return!e.full_name||!e.display_name||!!t&&n},p=(e,t)=>t&&!e.completed_verification_at,g=(e,t)=>!!f(e,t?"raven":"api"),m=(e,t)=>!t&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,C=(e,t)=>h(e,t)||p(e,t)||g(e,t)||m(e,t),v=()=>{let e=(0,c.useRouter)(),t=(0,a.useCookies)();return{refresh:()=>{e.refresh()},switchAndRefresh:(e,n)=>{t.set(i.c.LAST_ACTIVE_ORG,e),n?location.pathname=n:location.reload()}}},y=e=>{let{account:t}=(0,s.useCurrentAccount)();return t&&(h(t,e)||p(t,e))?"/onboarding":t&&g(t,e)?"/invites":t&&m(t,e)?"/create":e?"/chats":"/dashboard"},b=["privacy"],P=["aup","consumer-terms"],_=[...b,...P],E=(e,t)=>{let{data:n}=(0,d.uV)(),{mutateAsync:r}=(0,d.yq)();return(0,u.useCallback)(async()=>{if(!e||!n)return;let a=t.map(e=>n[e]),i=Object.fromEntries(a.map(e=>{let t=e.split(":");return[t[1],t[2]]}));t.some(t=>{let n=null==e?void 0:e.accepted_clickwrap_versions[t],r=i[t];return r&&(!n||n!==r)})&&await r({accept_document_ids:a})},[e,n,r,t])},w=(e,t)=>{let{account:n,refetch:r,setActiveOrganizationUUID:a}=(0,s.useCurrentAccount)(),[i,c]=(0,u.useState)(!1),[l,f]=(0,u.useState)(!1),h=S(),{addSuccess:p}=(0,o.useToasts)(),{data:g}=(0,d.gq)(e);return(0,u.useEffect)(()=>{n&&i&&l&&(t?t(h):h())},[l,h,i,n,t]),(0,u.useCallback)(async()=>{c(!0),await r(),(null==g?void 0:g.organization_uuid)&&(a(g.organization_uuid),p("Successfully joined ".concat(g.organization_name))),f(!0)},[g,p,r,a])},S=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,c.useSearchParams)().get("returnTo"),n=T(e);return(0,u.useCallback)(()=>{n(t)},[n,t])},T=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{account:t}=(0,s.useCurrentAccount)(),[n,a]=(0,u.useState)(!1),i=(0,c.useRouter)(),[o,l]=(0,u.useState)(null),d=(0,c.usePathname)(),f=(0,c.useSearchParams)(),h=(0,r.useIsClaudeDot)(),p=y(h);return(0,u.useEffect)(()=>{(n||e)&&!t&&i.push(x(d,f.toString()))},[t,i,n,e,d,f]),(0,u.useEffect)(()=>{if(n&&t){let e=k(t,o,p,h);i.push(e)}},[t,i,n,o,p,h]),(0,u.useCallback)(e=>{e&&l(e),a(!0)},[])},k=(e,t,n,r)=>{if(!t||!t.startsWith("/"))return n;if(C(e,r)){let e=new URLSearchParams({returnTo:t});return"".concat(n,"?").concat(e.toString())}return A(t)},x=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/login",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a="".concat(e,"?").concat(t),i=new URLSearchParams(r);return i.append("returnTo",a),"".concat(n,"?").concat(i.toString())};function A(e){return new URL(e,"http://example.com").pathname}function F(){let[e,t]=(0,u.useState)(!1);return{getRecaptchaToken:(0,u.useCallback)(async(e,n)=>(t(!0),new Promise((r,a)=>{if("undefined"==typeof grecaptcha)return t(!1),a(Error("Recaptcha failed to load"));grecaptcha.enterprise.ready(()=>{grecaptcha.enterprise.execute(e,{action:n}).then(e=>{r(e),t(!1)},e=>{t(!1),a(e)})})})),[]),isLoading:e}}let R=()=>{let{account:e}=(0,s.useCurrentAccount)(),{config:t}=(0,l.useConfig)("public_email_domains");return t.get("domains",[]).some(t=>null==e?void 0:e.email_address.endsWith("@".concat(t)))}},83243:function(e,t,n){var r,a;n.d(t,{DF:function(){return s},iw:function(){return i}}),(a=r||(r={})).GoogleTagManager="google_tag_manager",a.GoogleEnhancedConversions="google_enhanced_conversions";let i={analytics:!1,marketing:!1},s={analytics:!0,marketing:!0}},93144:function(e,t,n){n.d(t,{J:function(){return i}});var r=n(11492);let a=new Set(["BE","EL","LT","PT","BG","ES","LU","RO","CZ","FR","RE","GP","MQ","GF","YT","BL","MF","PM","WF","PF","NC","HU","SI","DK","FO","GL","HR","MT","SK","DE","IT","NL","AW","CW","SX","FI","AX","EE","CY","AT","SE","IE","LV","PL","UK","GB","AI","BM","IO","VG","KY","FK","GI","MS","PN","SH","TC","GG","JE","IM"]);function i(){let e=(0,r.useConfiguration)().ipCountry;return!!e&&a.has(e)}},59374:function(e,t,n){n.r(t),n.d(t,{ErrorsProvider:function(){return s},useToasts:function(){return o}});var r=n(27573),a=n(7653);let i=(0,a.createContext)(void 0);function s(e){let{children:t}=e,n=(0,a.useRef)(1),[s,o]=(0,a.useState)([]),c=(0,a.useCallback)(e=>{let t=n.current++;return o(n=>[...n,{id:t,message:e instanceof Error?e.message:e,toastType:"error"}]),t},[]),u=(0,a.useCallback)(e=>{let t=n.current++;return o(n=>[...n,{id:t,message:e instanceof Error?e.message:e,toastType:"success"}]),t},[]),l=(0,a.useCallback)(e=>{o(t=>t.filter(t=>t.id!==e))},[]),d=(0,a.useMemo)(()=>({toasts:s,addError:c,addSuccess:u,clearToast:l}),[s,c,u,l]);return(0,r.jsx)(i.Provider,{value:d,children:t})}function o(){let e=(0,a.useContext)(i);if(!e)throw Error("Must be called within ErrorsProvider");return e}},89937:function(e,t,n){n.d(t,{K:function(){return s}});var r=n(11492),a=n(93144),i=n(21728);let s=()=>{let{segmentKey:e,segmentCdnHost:t,segmentApiHost:n}=(0,r.useConfiguration)(),s=(0,a.J)();return i.u.loadIfNecessary({segmentKey:e,segmentCdnHost:t,segmentApiHost:n,isInEU:s})}},21728:function(e,t,n){n.d(t,{u:function(){return h}});var r=n(70478),a=n(39625),i=n(43316),s=n(27794),o=n.n(s),c=n(83243),u=n(23532),l=n(90974);class d{constructor(){this.name="RemoveUserAgent",this.version="1.0.0",this.type="before",this.isLoaded=()=>!0,this.load=()=>Promise.resolve(),this.redactPiiFromContext=e=>{var t;return(null==e?void 0:null===(t=e.event)||void 0===t?void 0:t.context)&&(delete e.event.context.userAgent,delete e.event.context.email,e.event.context.ip="REDACTED"),e},this.track=this.redactPiiFromContext,this.identify=this.redactPiiFromContext,this.page=this.redactPiiFromContext,this.group=this.redactPiiFromContext,this.alias=this.redactPiiFromContext,this.screen=this.redactPiiFromContext}}class f{constructor(){this.consentChangedCallback=o(),this.preferences=f.mapConsentPreferences(c.iw),this.analyticsBrowser=null,this.loadIfNecessary=e=>{let{segmentKey:t,segmentCdnHost:n,segmentApiHost:r,isInEU:s}=e;return this.analyticsBrowser||(this.analyticsBrowser=new a.b,this.loadInitialConsentPreferences(s),this.wrapAnalyticsWithConsent(this.analyticsBrowser).load({writeKey:t,cdnURL:"https://".concat(n),plugins:[new d]},{disableClientPersistence:!0,integrations:{"Segment.io":{apiHost:"".concat(r,"/v1"),protocol:"https"}}}).catch(e=>{(0,i.Tb)(e,{extra:{message:"Failed to load analytics"}})})),this.analyticsBrowser},this.registerOnConsentChanged=e=>{this.consentChangedCallback=e},this.getCategories=()=>this.preferences,this.loadInitialConsentPreferences=e=>{let t;try{t=u.browserCookieStore.get(l.c.CONSENT_PREFERENCES)}catch(e){(0,i.Tb)(e,{extra:{message:"Failed to get consent preferences cookie"}})}if(t)try{let e=JSON.parse(t);this.preferences=f.mapConsentPreferences(e)}catch(e){console.warn("Malformed consent preferences cookie",t)}else e||(this.preferences=f.mapConsentPreferences(c.DF))},this.updateCategories=e=>{this.preferences=f.mapConsentPreferences(e),this.consentChangedCallback(this.preferences)},this.wrapAnalyticsWithConsent=e=>(0,r.K)({registerOnConsentChanged:this.registerOnConsentChanged,getCategories:this.getCategories})(e)}}f.mapConsentPreferences=e=>({marketing:e.marketing,analytics:e.analytics,necessary:!0});let h=new f},2715:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(27573),a=n(44115);function i(e){let{size:t="md",fullscreen:n=!1,inheritColor:i}=e;return(0,r.jsx)("div",{className:(0,a.Z)(n?"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2":"m-auto"),children:(0,r.jsx)("div",{className:(0,a.Z)("sm"===t&&"h-4 w-4 border-2","md"===t&&"h-20 w-20 border-8",i?"border-current":"border-border-200","inline-block animate-spin rounded-full border-solid  border-r-transparent align-[-0.125em] text-secondary motion-reduce:animate-[spin_1.5s_linear_infinite]"),role:"status",children:(0,r.jsx)("span",{className:"sr-only",children:"Loading..."})})})}},92472:function(e,t,n){var r=n(44115),a=n(7653);function i(e){return function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];let o=t.map(e=>e.replace(/\n/g,"").trim()),c=a.forwardRef((t,n)=>{let{className:s,...c}=t,u=i.map(e=>"function"==typeof e?e(t):e);return a.createElement(e,{...c,ref:n,className:(0,r.Z)(o,u,"string"==typeof s?s:"")})});return c.displayName="string"==typeof e?e:e.displayName,c}}function s(e){return i(e)}s.a=i("a"),s.aside=i("aside"),s.button=i("button"),s.main=i("main"),s.div=i("div"),s.nav=i("nav"),s.fieldset=i("fieldset"),s.header=i("header"),s.h1=i("h1"),s.h2=i("h2"),s.h3=i("h3"),s.h4=i("h4"),s.h5=i("h5"),s.th=i("th"),s.td=i("td"),s.input=i("input"),s.label=i("label"),s.p=i("p"),s.section=i("section"),s.span=i("span"),s.li=i("li"),t.Z=s}}]);