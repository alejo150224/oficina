(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8494],{20549:function(){},43290:function(){},83041:function(e,t,n){"use strict";n.d(t,{Ne:function(){return m},WE:function(){return f},uC:function(){return d}});var r=n(28648),i=n(43316),o=n(56646),u=n(2645),a=n(84983),c=n(7653),s=n(68571);function l(e,t){return(0,c.useCallback)(async(n,o)=>{var u,a;let c=await fetch(n,{...o,headers:{"anthropic-client-sha":null!==(u=s.env.RELEASE_SHA)&&void 0!==u?u:"unknown","anthropic-client-version":null!==(a=s.env.RELEASE_VERSION)&&void 0!==a?a:"unknown",...o.headers}}),l=await c.text(),d={error:{type:"api_error",message:l}};try{("DELETE"!==o.method||l.length>0)&&(d=JSON.parse(l))}catch(e){(0,i.uT)("Got invalid JSON from NextJS response",{extra:{text:l,status:c.status}})}if(!c.ok&&t!==c.status)throw(0,r.fT)(c.status,d,e,c.headers);return d},[e,t])}let d=(e,t,n)=>{let{transformVariables:r,enabled:i=!0,...u}=n||{},a=l("Mutation error"),{mutate:s,...d}=(0,o.useMutation)({mutationFn:async n=>{let i;i="function"==typeof e?e(n):e;let o=r?r(n):n;return await a(i,{method:t,headers:{"Content-Type":"application/json"},body:o?JSON.stringify(o):void 0})},...u});return{mutate:(0,c.useCallback)(e=>{i&&s(e)},[s,i]),...d}},f=(e,t,n)=>{let r=l("Query error",null==t?void 0:t.additionalPermittedStatusCode);return(0,u.useQuery)({queryKey:[e,n],queryFn:async()=>{let t=await r(e,{method:"GET",headers:{"Content-Type":"application/json"}});return n?n(t):t},retry:!1,...t})};function m(e,t,n,r){let i=(0,a.useQueryClient)(),{queryKey:o,...u}=r;return d(e,t,{async onMutate(e){await i.cancelQueries({queryKey:o});let t=i.getQueryData(o);return i.setQueryData(o,t=>n(e,t)),{previousValue:t}},onError(e,t,n){(null==n?void 0:n.previousValue)&&i.setQueryData(o,n.previousValue)},...u})}},11492:function(e,t,n){"use strict";n.r(t),n.d(t,{ConfigurationProvider:function(){return u},useConfiguration:function(){return a},useIsClaudeDot:function(){return c}});var r=n(27573),i=n(7653);let o=(0,i.createContext)(void 0),u=e=>{let{config:t,children:n}=e;return(0,r.jsx)(o.Provider,{value:t,children:n})},a=()=>{let e=(0,i.useContext)(o);if(!e)throw Error("useConfiguration must be called from within ConfigurationProvider");return e},c=()=>{let{applicationType:e}=a();return"claude-dot"===e}},23532:function(e,t,n){"use strict";n.r(t),n.d(t,{SSRCookiesProvider:function(){return s},browserCookieStore:function(){return c},useCookies:function(){return l}});var r=n(27573),i=n(7653);function o(e){return e.endsWith(".anthropic.com")?".anthropic.com":"claude.ai"===e||e.endsWith(".claude.ai")?".claude.ai":e.endsWith(".staging.ant.dev")?".".concat(e):void 0}let u=(0,i.createContext)(null),a="Thu, 01 Jan 1970 00:00:01 GMT",c={get:e=>{let t=document.cookie.split(";");for(let n=0;n<t.length;n++){let[r,i]=t[n].trim().split("=");if(e===r)return decodeURIComponent(i)}},set:(e,t)=>{let n=["".concat(e,"=").concat(encodeURIComponent(t)),"max-age=".concat(31536e3),"samesite=lax","secure","path=/"],r=o(window.location.hostname);r&&(document.cookie="".concat(e,"=[removed]; expires=").concat(a,"; samesite=lax; secure; path=/"),n.push("domain=".concat(r))),document.cookie=n.join("; ")},delete:e=>{let t=["".concat(e,"=[removed]"),"expires=".concat(a),"samesite=lax","secure"],n=o(window.location.hostname);n&&t.push("domain=".concat(n)),document.cookie=t.join("; ")}},s=e=>{let{value:t,children:n}=e,o=(0,i.useMemo)(()=>{if(!t)return{get:()=>void 0,set:()=>void 0,delete:()=>void 0};let e=Object.fromEntries(t.map(e=>[e.name,e.value]));return{get:t=>e[t],set:e=>{throw Error("Cannot set cookies in server-rendered client component. Attempting to set ".concat(e))},delete:e=>{throw Error("Cannot delete cookies in server-rendered client component. Attempting to delete ".concat(e))}}},[t]);return(0,r.jsx)(u.Provider,{value:o,children:n})},l=()=>((0,i.useContext)(u),c)},90974:function(e,t,n){"use strict";var r,i;n.d(t,{c:function(){return r}}),(i=r||(r={})).LAST_ACTIVE_ORG="lastActiveOrg",i.COLOR_MODE="CH-prefers-color-scheme",i.CONSENT_PREFERENCES="anthropic-consent-preferences"},16096:function(e,t,n){"use strict";n.r(t),n.d(t,{CurrentAccountProvider:function(){return p},useBootstrapQuery:function(){return _},useCanManageBilling:function(){return k},useCanUpgradeToPro:function(){return x},useCurrentAccount:function(){return w},useHasCapability:function(){return C},useHasPaidAccount:function(){return E},useHasProSubscription:function(){return b},useHasRaven:function(){return y},useIsReadOnlyMode:function(){return M},useUsagePaused:function(){return S}});var r=n(27573),i=n(28648),o=n(35146),u=n(88337),a=n(81054),c=n.n(a),s=n(7653),l=n(80248),d=n(83041),f=n(11492),m=n(23532),v=n(90974);let g=(0,s.createContext)(null),p=e=>{let{children:t}=e,n=(0,m.useCookies)(),[o,u]=(0,s.useState)(),{data:a,error:l,isFetching:d,refetch:p}=_();(0,s.useEffect)(()=>{o&&n.set(v.c.LAST_ACTIVE_ORG,o)},[o,n]);let h=(0,f.useIsClaudeDot)(),w=(0,s.useMemo)(()=>{let e;if(!(null==a?void 0:a.account))return;let t=h?"chat":"api",r=a.account.memberships.map(e=>e.organization).filter(e=>e.capabilities.includes(t));if(o){let e=r.find(e=>e.uuid===o);if(e)return e}if(!e){let t=n.get(v.c.LAST_ACTIVE_ORG);e=r.find(e=>e.uuid===t)}return e||(e=c()(r,"name")),e&&u(e.uuid),e},[a,o,h,n]),C=(0,s.useMemo)(()=>{var e;let t=l instanceof i.Hx&&403===l.statusCode||!(null==a?void 0:a.account);return{account:null==a?void 0:a.account,activeOrganization:w,statsig:null==a?void 0:a.statsig,intercomAccountHash:null==a?void 0:a.intercom_account_hash,messageLimit:null==a?void 0:null===(e=a.messageLimits)||void 0===e?void 0:e[(null==w?void 0:w.uuid)||""],setActiveOrganizationUUID:u,isLoading:d,isLoggedOut:!d&&t,refetch:async()=>{var e;return null===(e=(await p()).data)||void 0===e?void 0:e.account}}},[a,l,w,d,p]);return(0,r.jsx)(g.Provider,{value:C,children:t})},h=e=>e&&"type"in e?null:e,_=()=>{let{data:e,refetch:t,...n}=(0,d.WE)("/api/bootstrap",{queryKey:[o.aY],staleTime:1/0,retryOnMount:!1,additionalPermittedStatusCode:403}),r=(0,s.useCallback)(async()=>{let e=await t();return{...e,data:h(e.data)}},[t]);return{...n,data:h(e),refetch:r}},w=()=>{let e=(0,s.useContext)(g);if(!e)throw Error("Must call inside CurrentAccountProvider");return e},C=e=>{let{activeOrganization:t}=w();return!!t&&t.capabilities.includes(e)},b=()=>C("claude_pro"),y=()=>C("raven"),E=()=>{let e=b(),t=y();return e||t},x=()=>{let e=b(),t=y();return!e&&!t},M=()=>{let{value:e}=(0,l.useGate)("read_only_mode");return e},k=()=>{let{account:e,activeOrganization:t}=w(),n=(0,u.Di)(e,t,u.YB.BillingManage),r=b(),{value:i}=(0,l.useGate)("claude-pro-disabled"),o=y();return o&&n||!o&&(r||!i)},S=()=>{let{activeOrganization:e}=w();return null!=e&&!!e.billable_usage_paused_until&&new Date(e.billable_usage_paused_until)>new Date}},28648:function(e,t,n){"use strict";n.d(t,{Hx:function(){return r},fT:function(){return i}});class r extends Error{constructor(e,t,n,r){super(e),this.type=t,this.statusCode=n,this.extra=r}}function i(e,t,n,i){if(t&&"object"==typeof t&&"error"in t){let{message:n,type:o,...u}=t.error;return u.headers=i,new r(n,o,e,u)}return new r(n,"api_error",e,t||{})}},35146:function(e,t,n){"use strict";n.d(t,{$T:function(){return C},BB:function(){return v},Ep:function(){return i},I8:function(){return a},I_:function(){return g},QU:function(){return _},Qn:function(){return m},RK:function(){return d},aY:function(){return s},eW:function(){return h},ec:function(){return r},gi:function(){return b},gs:function(){return l},je:function(){return f},lx:function(){return y},mm:function(){return p},ph:function(){return u},sM:function(){return w},sf:function(){return c},tt:function(){return E},tv:function(){return o},zy:function(){return x}});let r="account_profile",i="chat_message_debug_info",o="chat_conversation_list",u="chat_conversation",a="chat_conversation_tree",c="chat_failed_stream_retry",s="current_account",l="current_account_deletable",d="invoice_list",f="upcoming_invoice",m="model_config",v="org_invites",g="org_members",p="org",h="account_statsig",_="subscription_details",w="subscription_status",C="project",b="project_list",y="project_list_conversations",E="project_doc",x="project_doc_list"},88337:function(e,t,n){"use strict";var r,i;n.d(t,{Di:function(){return u},Fs:function(){return a},YB:function(){return r}}),(i=r||(r={})).MembersView="members:view",i.MembersManage="members:manage",i.ApiView="api:view",i.ApiManage="api:manage",i.IntegrationsManage="integrations:manage",i.BillingView="billing:view",i.BillingManage="billing:manage",i.OrganizationManage="organization:manage",i.InvoicesView="invoices:view",i.UsageView="usage:view";let o={user:["members:view"],developer:["members:view","api:view","api:manage","integrations:manage","usage:view"],billing:["members:view","billing:view","billing:manage","usage:view","invoices:view"],admin:["members:view","members:manage","api:view","api:manage","integrations:manage","billing:view","billing:manage","usage:view","invoices:view","organization:manage"]},u=(e,t,n)=>!!e&&!!t&&a(e,t,n),a=(e,t,n)=>{var r;let i=null===(r=e.memberships.find(e=>e.organization.uuid===t.uuid))||void 0===r?void 0:r.role;return!!i&&o[i].includes(n)}}}]);